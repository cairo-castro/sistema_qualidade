<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Elementos Accent</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .element-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .element-card {
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            background: #fafafa;
        }

        .element-card h4 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #666;
        }

        /* Elementos que deveriam ser afetados pelo accent */
        .btn-primary {
            background-color: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
        }

        .gqa-btn.primary {
            background-color: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            display: inline-block;
            text-decoration: none;
        }

        .text-blue-500 {
            color: #3b82f6;
            font-weight: 500;
        }

        .bg-blue-500 {
            background-color: #3b82f6;
            color: white;
            padding: 10px;
            border-radius: 5px;
        }

        .border-blue-500 {
            border: 2px solid #3b82f6;
            padding: 10px;
            border-radius: 5px;
        }

        .btn-accent {
            background-color: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .accent-color {
            color: #3b82f6;
            font-weight: 500;
        }

        .primary-button {
            background-color: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .blue-text {
            color: #3b82f6;
        }

        .blue-bg {
            background-color: #3b82f6;
            color: white;
            padding: 10px;
            border-radius: 5px;
        }

        .control-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            min-width: 250px;
        }

        .control-panel h3 {
            margin: 0 0 15px 0;
            font-size: 16px;
        }

        .color-input {
            width: 100%;
            height: 40px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .test-button {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
        }

        .found-elements {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="control-panel">
        <h3>üé® Teste de Accent</h3>

        <label>Cor de Accent:</label>
        <input type="color" id="accentColor" class="color-input" value="#3b82f6">

        <button class="test-button" style="background: #3b82f6; color: white;" onclick="testAccent()">
            üß™ Aplicar Accent
        </button>

        <button class="test-button" style="background: #22c55e; color: white;" onclick="testAccent('#22c55e')">
            üü¢ Verde
        </button>

        <button class="test-button" style="background: #ef4444; color: white;" onclick="testAccent('#ef4444')">
            üî¥ Vermelho
        </button>

        <button class="test-button" style="background: #8b5cf6; color: white;" onclick="testAccent('#8b5cf6')">
            üü£ Roxo
        </button>

        <button class="test-button" style="background: #f59e0b; color: white;" onclick="findAccentElements()">
            üîç Encontrar Elementos
        </button>

        <div id="foundElements" class="found-elements" style="display: none;"></div>
    </div>

    <div class="test-container">
        <h1>üéØ Teste de Elementos Accent</h1>
        <p>Esta p√°gina cont√©m todos os elementos que deveriam ser afetados pela cor de <strong>accent</strong> no sistema de temas.</p>

        <div class="section">
            <h2>üìù Seletores Testados</h2>
            <p>O sistema busca por estes seletores CSS:</p>
            <code>
                '.btn-primary, .gqa-btn.primary, .text-blue-500, .bg-blue-500, .border-blue-500, [class*="blue-"], .btn-accent, .accent-color, .primary-button'
            </code>
        </div>

        <div class="section">
            <h2>üé® Elementos de Background (devem mudar fundo)</h2>
            <div class="element-grid">
                <div class="element-card">
                    <h4>.btn-primary</h4>
                    <button class="btn-primary">Bot√£o Primary</button>
                </div>

                <div class="element-card">
                    <h4>.gqa-btn.primary</h4>
                    <a href="#" class="gqa-btn primary">Link Primary</a>
                </div>

                <div class="element-card">
                    <h4>.bg-blue-500</h4>
                    <div class="bg-blue-500">Background Azul</div>
                </div>

                <div class="element-card">
                    <h4>.btn-accent</h4>
                    <button class="btn-accent">Bot√£o Accent</button>
                </div>

                <div class="element-card">
                    <h4>.primary-button</h4>
                    <button class="primary-button">Primary Button</button>
                </div>

                <div class="element-card">
                    <h4>[class*="blue-"] (blue-bg)</h4>
                    <div class="blue-bg">Classe com "blue"</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚úçÔ∏è Elementos de Texto (devem mudar cor do texto)</h2>
            <div class="element-grid">
                <div class="element-card">
                    <h4>.text-blue-500</h4>
                    <p class="text-blue-500">Texto azul 500</p>
                </div>

                <div class="element-card">
                    <h4>.accent-color</h4>
                    <p class="accent-color">Cor de accent</p>
                </div>

                <div class="element-card">
                    <h4>[class*="blue-"] (blue-text)</h4>
                    <p class="blue-text">Texto com classe "blue"</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üñºÔ∏è Elementos de Borda (devem mudar cor da borda)</h2>
            <div class="element-grid">
                <div class="element-card">
                    <h4>.border-blue-500</h4>
                    <div class="border-blue-500">Elemento com borda azul</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üß™ Teste Real do Sistema</h2>
            <p>Clique no bot√£o abaixo para executar a fun√ß√£o real do sistema:</p>
            <button onclick="testRealSystem()" style="background: #1f2937; color: white; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; font-weight: 500;">
                üöÄ Testar Sistema Real (_applyAccentColor)
            </button>
            <div id="systemTest" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px; display: none;"></div>
        </div>
    </div>

    <script>
        // Fun√ß√£o para simular a aplica√ß√£o de accent
        function testAccent(color = null) {
            const accentColor = color || document.getElementById('accentColor').value;
            const textColor = getContrastingTextColor(accentColor);

            console.log(`üé® Testing accent: ${accentColor} with text: ${textColor}`);

            // Simular a fun√ß√£o _applyAccentColor
            const accentElements = document.querySelectorAll(
                '.btn-primary, .gqa-btn.primary, .text-blue-500, .bg-blue-500, ' +
                '.border-blue-500, [class*="blue-"], .btn-accent, .accent-color, .primary-button'
            );

            console.log(`üîç Found ${accentElements.length} accent elements`);

            accentElements.forEach((element, index) => {
                console.log(`${index + 1}. ${element.className}`);

                if (element.classList.contains('bg-blue-500') ||
                    element.classList.contains('btn-primary') ||
                    element.classList.contains('btn-accent') ||
                    element.classList.contains('primary-button') ||
                    element.className.includes('blue-bg')) {

                    element.style.backgroundColor = accentColor;
                    element.style.borderColor = accentColor;
                    element.style.color = textColor;
                    console.log(`  ‚Üí Applied background: ${accentColor}`);

                } else if (element.classList.contains('text-blue-500') ||
                           element.classList.contains('accent-color') ||
                           element.className.includes('blue-text')) {

                    element.style.color = accentColor;
                    console.log(`  ‚Üí Applied text color: ${accentColor}`);

                } else if (element.classList.contains('border-blue-500')) {
                    element.style.borderColor = accentColor;
                    console.log(`  ‚Üí Applied border color: ${accentColor}`);
                }
            });
        }

        // Fun√ß√£o para encontrar elementos
        function findAccentElements() {
            const accentElements = document.querySelectorAll(
                '.btn-primary, .gqa-btn.primary, .text-blue-500, .bg-blue-500, ' +
                '.border-blue-500, [class*="blue-"], .btn-accent, .accent-color, .primary-button'
            );

            const foundDiv = document.getElementById('foundElements');
            foundDiv.style.display = 'block';
            foundDiv.innerHTML = `
                <strong>Encontrados ${accentElements.length} elementos:</strong><br>
                ${Array.from(accentElements).map((el, i) =>
                    `${i + 1}. ${el.tagName}.${el.className} - ${el.textContent?.slice(0, 20) || 'sem texto'}`
                ).join('<br>')}
            `;
        }

        // Fun√ß√£o para testar o sistema real
        function testRealSystem() {
            const systemDiv = document.getElementById('systemTest');
            systemDiv.style.display = 'block';

            if (window.Hospital && window.Hospital.themeManager && window.Hospital.themeManager._applyAccentColor) {
                systemDiv.innerHTML = `
                    <strong>‚úÖ Sistema encontrado!</strong><br>
                    Executando window.Hospital.themeManager._applyAccentColor('#ff6b35', '#ffffff')...
                `;

                try {
                    window.Hospital.themeManager._applyAccentColor('#ff6b35', '#ffffff');
                    systemDiv.innerHTML += '<br><strong>‚úÖ Fun√ß√£o executada com sucesso!</strong>';
                } catch (error) {
                    systemDiv.innerHTML += `<br><strong>‚ùå Erro:</strong> ${error.message}`;
                }
            } else {
                systemDiv.innerHTML = `
                    <strong>‚ùå Sistema n√£o encontrado</strong><br>
                    Verifique se o sistema Hospital est√° carregado.<br>
                    Dispon√≠vel: window.Hospital = ${!!window.Hospital}<br>
                    ThemeManager: ${!!window.Hospital?.themeManager}<br>
                    _applyAccentColor: ${!!window.Hospital?.themeManager?._applyAccentColor}
                `;
            }
        }

        // Fun√ß√£o para calcular cor contrastante
        function getContrastingTextColor(hexColor) {
            const hex = hexColor.replace('#', '');
            const r = parseInt(hex.substr(0, 2), 16);
            const g = parseInt(hex.substr(2, 2), 16);
            const b = parseInt(hex.substr(4, 2), 16);
            const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
            return luminance > 0.5 ? '#000000' : '#ffffff';
        }

        // Teste autom√°tico ao carregar
        console.log('üß™ P√°gina de teste carregada');
        findAccentElements();
    </script>
</body>
</html>
