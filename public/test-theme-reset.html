<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Reset de Tema</title>
    <script src="./build/assets/vendor-alpine-Bq6v2RRG.js"></script>
    <link rel="stylesheet" href="./build/assets/app-B-qg5eef.css">
    <style>
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
        }
        .test-container {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        .test-button {
            margin: 5px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
        }
        .btn-test { background: #3b82f6; color: white; }
        .btn-green { background: #22c55e; color: white; }
        .btn-reset { background: #ef4444; color: white; }

        /* Simular estrutura do hospital */
        .mock-layout {
            display: flex;
            height: 300px;
            border: 1px solid #ccc;
            margin: 20px 0;
        }
        .mock-sidebar {
            width: 200px;
            background: var(--gqa-surface, #ffffff);
            border-right: 1px solid var(--gqa-border, #e5e7eb);
            padding: 10px;
            color: var(--gqa-text-primary, #111827);
        }
        .mock-navbar {
            background: var(--gqa-surface, #ffffff);
            border-bottom: 1px solid var(--gqa-border, #e5e7eb);
            padding: 10px 20px;
            color: var(--gqa-text-primary, #111827);
        }
        .mock-content {
            flex: 1;
            padding: 20px;
            background: var(--gqa-background, #f9fafb);
            color: var(--gqa-text-primary, #111827);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Teste de Reset de Tema</h1>

        <div class="test-section">
            <h3>Estado do Sistema</h3>
            <p id="themeStatus">Carregando...</p>
            <p><strong>Cores Atuais:</strong></p>
            <ul id="currentColors"></ul>
        </div>

        <div class="test-section">
            <h3>A√ß√µes de Teste</h3>
            <button class="test-button btn-green" onclick="applyGreenTheme()">
                Aplicar Tema Verde (Simular Customiza√ß√£o)
            </button>
            <button class="test-button btn-test" onclick="applyBlueTheme()">
                Aplicar Tema Azul (Simular Customiza√ß√£o)
            </button>
            <button class="test-button btn-reset" onclick="resetTheme()">
                üîÑ RESETAR TEMA (Deve voltar ao padr√£o)
            </button>
        </div>

        <div class="test-section">
            <h3>Preview Visual</h3>
            <div class="mock-navbar hospital-navbar">
                <strong>Navbar</strong> - Esta √© a barra de navega√ß√£o
            </div>
            <div class="mock-layout">
                <div class="mock-sidebar hospital-sidebar">
                    <strong>Sidebar</strong><br>
                    ‚Ä¢ Menu 1<br>
                    ‚Ä¢ Menu 2<br>
                    ‚Ä¢ Menu 3
                </div>
                <div class="mock-content hospital-content">
                    <strong>Conte√∫do Principal</strong><br>
                    Este √© o conte√∫do da p√°gina. No estado padr√£o:
                    <ul>
                        <li>Navbar deve ser branca</li>
                        <li>Sidebar deve ser branca (n√£o verde!)</li>
                        <li>Background deve ser cinza claro</li>
                        <li>Texto deve ser cinza escuro</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>Log de A√ß√µes</h3>
            <div id="actionLog" style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;"></div>
        </div>
    </div>

    <script src="./build/assets/app-BN95TwCV.js"></script>
    <script>
        // Aguardar carregamento do sistema
        document.addEventListener('DOMContentLoaded', function() {
            // Aguardar Alpine.js inicializar
            setTimeout(function() {
                updateStatus();

                // Configurar window globals para teste
                window.hasCustomTheme = false;
                window.userTheme = {};

                log('Sistema carregado - Pronto para testes');
            }, 500);
        });

        function updateStatus() {
            const statusEl = document.getElementById('themeStatus');
            const colorsEl = document.getElementById('currentColors');

            if (window.Hospital && window.Hospital.themeManager) {
                const tm = window.Hospital.themeManager;
                statusEl.innerHTML = `
                    <strong>Tema Ativo:</strong> ${window.hasCustomTheme ? 'Customizado' : 'Padr√£o'}<br>
                    <strong>ThemeManager:</strong> Dispon√≠vel ‚úÖ
                `;

                colorsEl.innerHTML = `
                    <li><strong>Navbar:</strong> ${tm.colors.navbar}</li>
                    <li><strong>Sidebar:</strong> ${tm.colors.sidebar}</li>
                    <li><strong>Background:</strong> ${tm.colors.background}</li>
                    <li><strong>Accent:</strong> ${tm.colors.accent}</li>
                `;
            } else {
                statusEl.innerHTML = '<span style="color: red;">ThemeManager n√£o encontrado ‚ùå</span>';
                colorsEl.innerHTML = '<li>Indispon√≠vel</li>';
            }
        }

        function log(message) {
            const logEl = document.getElementById('actionLog');
            const timestamp = new Date().toLocaleTimeString();
            logEl.innerHTML += `[${timestamp}] ${message}\n`;
            logEl.scrollTop = logEl.scrollHeight;
        }

        function applyGreenTheme() {
            if (window.Hospital && window.Hospital.themeManager) {
                log('Aplicando tema verde customizado...');
                const tm = window.Hospital.themeManager;

                tm.colors.navbar = '#22c55e';
                tm.colors.sidebar = '#16a34a';
                tm.colors.background = '#f0fdf4';
                tm.colors.accent = '#22c55e';

                tm._applyNavbarColor('#22c55e', '#ffffff');
                tm._applySidebarColor('#16a34a', '#ffffff');
                tm._applyBackgroundColor('#f0fdf4', '#166534');

                window.hasCustomTheme = true;
                updateStatus();
                log('‚úÖ Tema verde aplicado');
            } else {
                log('‚ùå ThemeManager n√£o dispon√≠vel');
            }
        }

        function applyBlueTheme() {
            if (window.Hospital && window.Hospital.themeManager) {
                log('Aplicando tema azul customizado...');
                const tm = window.Hospital.themeManager;

                tm.colors.navbar = '#3b82f6';
                tm.colors.sidebar = '#1d4ed8';
                tm.colors.background = '#eff6ff';
                tm.colors.accent = '#3b82f6';

                tm._applyNavbarColor('#3b82f6', '#ffffff');
                tm._applySidebarColor('#1d4ed8', '#ffffff');
                tm._applyBackgroundColor('#eff6ff', '#1e3a8a');

                window.hasCustomTheme = true;
                updateStatus();
                log('‚úÖ Tema azul aplicado');
            } else {
                log('‚ùå ThemeManager n√£o dispon√≠vel');
            }
        }

        function resetTheme() {
            if (window.Hospital && window.Hospital.themeManager) {
                log('üîÑ INICIANDO RESET DO TEMA...');
                const tm = window.Hospital.themeManager;

                try {
                    tm.resetTheme();
                    setTimeout(() => {
                        updateStatus();
                        log('‚úÖ RESET CONCLU√çDO - Verificar se sidebar voltou a ser BRANCA (n√£o verde!)');
                    }, 500);
                } catch (error) {
                    log('‚ùå ERRO no reset: ' + error.message);
                }
            } else {
                log('‚ùå ThemeManager n√£o dispon√≠vel');
            }
        }
    </script>
</body>
</html>
