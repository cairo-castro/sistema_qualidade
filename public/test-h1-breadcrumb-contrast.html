<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste H1 e Breadcrumbs - Contraste de Cores</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .color-picker { margin: 10px 0; }
        .color-picker input { width: 100px; height: 40px; border: none; cursor: pointer; }
        .demo-section { border: 2px solid #ddd; margin: 20px 0; padding: 20px; border-radius: 8px; }
        .hospital-content { min-height: 300px; padding: 20px; border-radius: 8px; }

        /* Estilos para breadcrumbs */
        .breadcrumb { list-style: none; padding: 0; margin: 0; display: flex; }
        .breadcrumb li { margin-right: 10px; }
        .breadcrumb li:not(:last-child)::after { content: " / "; margin-left: 10px; }
        .breadcrumb a { text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }

        /* Estilos para page header */
        .page-header { margin-bottom: 20px; }
        .page-title { margin: 0 0 10px 0; }

        /* CSS para simular o tema */
        .bg-white { background-color: white !important; color: black !important; }
        .bg-dark { background-color: #333 !important; color: white !important; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Teste de Contraste - H1 e Breadcrumbs</h1>

        <div x-data="testHeaderContrast()" x-init="init()">
            <!-- Controles -->
            <div class="demo-section">
                <h2>Controles de Cor</h2>
                <div class="color-picker">
                    <label>Background Color:</label>
                    <input type="color"
                           :value="backgroundColor"
                           @input="updateBackgroundColor($event.target.value)">
                    <span x-text="backgroundColor"></span>
                </div>

                <div style="margin: 10px 0;">
                    <button @click="setPreset('#ffffff')" class="bg-white" style="padding: 10px; margin: 5px;">Branco</button>
                    <button @click="setPreset('#000000')" class="bg-dark" style="padding: 10px; margin: 5px;">Preto</button>
                    <button @click="setPreset('#ff0000')" style="background: red; color: white; padding: 10px; margin: 5px;">Vermelho</button>
                    <button @click="setPreset('#0000ff')" style="background: blue; color: white; padding: 10px; margin: 5px;">Azul</button>
                    <button @click="setPreset('#ffd700')" style="background: gold; color: black; padding: 10px; margin: 5px;">Dourado</button>
                </div>
            </div>

            <!-- √Årea de Demonstra√ß√£o -->
            <div class="demo-section">
                <h2>Demonstra√ß√£o - Background Color com H1 e Breadcrumbs</h2>

                <!-- Simula√ß√£o da √°rea de conte√∫do -->
                <div class="hospital-content"
                     :style="`background-color: ${backgroundColor}; color: ${textColor}`">

                    <!-- Page Header com H1 -->
                    <div class="page-header">
                        <h1 class="page-title">Este √© o H1 Principal da P√°gina</h1>
                        <p>Subt√≠tulo que acompanha o header principal</p>
                    </div>

                    <!-- Breadcrumbs -->
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li><a href="#">Home</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Configura√ß√µes</a></li>
                            <li>Tema</li>
                        </ol>
                    </nav>

                    <!-- Outros tipos de headers -->
                    <div style="margin: 20px 0;">
                        <h2>H2 - T√≠tulo Secund√°rio</h2>
                        <h3>H3 - T√≠tulo Terci√°rio</h3>
                        <p>Este √© um par√°grafo normal para compara√ß√£o.</p>
                    </div>

                    <!-- Breadcrumb alternativo -->
                    <div class="breadcrumbs" style="margin: 20px 0;">
                        <span>Voc√™ est√° em: </span>
                        <a href="#">In√≠cio</a> /
                        <a href="#">M√≥dulos</a> /
                        <span>Atual</span>
                    </div>

                    <!-- Headers com classes espec√≠ficas -->
                    <div class="content-header" style="margin: 20px 0;">
                        <h1 class="header-title">Header com Classe Espec√≠fica</h1>
                    </div>

                    <div class="page-breadcrumb" style="margin: 20px 0;">
                        <a href="#">Link 1</a> ‚Üí <a href="#">Link 2</a> ‚Üí <span>Atual</span>
                    </div>
                </div>
            </div>

            <!-- Informa√ß√µes de Debug -->
            <div class="demo-section">
                <h2>Informa√ß√µes de Debug</h2>
                <p><strong>Background Color:</strong> <span x-text="backgroundColor"></span></p>
                <p><strong>Text Color:</strong> <span x-text="textColor"></span></p>
                <p><strong>Contraste:</strong> <span x-text="contrastRatio"></span></p>
                <p><strong>Status:</strong> <span x-text="contrastStatus" :class="contrastClass"></span></p>
            </div>
        </div>
    </div>

    <script>
        // Fun√ß√£o para calcular lumin√¢ncia
        function getLuminance(hex) {
            const rgb = hexToRgb(hex);
            const [r, g, b] = [rgb.r, rgb.g, rgb.b].map(c => {
                c = c / 255;
                return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
            });
            return 0.2126 * r + 0.7152 * g + 0.0722 * b;
        }

        // Fun√ß√£o para converter hex para RGB
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        // Fun√ß√£o para calcular contraste
        function getContrastRatio(color1, color2) {
            const l1 = getLuminance(color1);
            const l2 = getLuminance(color2);
            const lighter = Math.max(l1, l2);
            const darker = Math.min(l1, l2);
            return (lighter + 0.05) / (darker + 0.05);
        }

        // Fun√ß√£o para obter cor contrastante
        function getContrastingTextColor(backgroundColor) {
            const whiteContrast = getContrastRatio(backgroundColor, '#ffffff');
            const blackContrast = getContrastRatio(backgroundColor, '#000000');
            return whiteContrast > blackContrast ? '#ffffff' : '#000000';
        }

        function testHeaderContrast() {
            return {
                backgroundColor: '#f9fafb',
                textColor: '#000000',
                contrastRatio: '0',
                contrastStatus: 'Calculando...',
                contrastClass: '',

                init() {
                    this.updateColors();
                },

                updateBackgroundColor(color) {
                    this.backgroundColor = color;
                    this.updateColors();
                    this.applyColorsToContent();
                },

                setPreset(color) {
                    this.backgroundColor = color;
                    this.updateColors();
                    this.applyColorsToContent();
                },

                updateColors() {
                    this.textColor = getContrastingTextColor(this.backgroundColor);
                    const ratio = getContrastRatio(this.backgroundColor, this.textColor);
                    this.contrastRatio = ratio.toFixed(2) + ':1';

                    if (ratio >= 7) {
                        this.contrastStatus = 'Excelente (AAA)';
                        this.contrastClass = 'text-green-600';
                    } else if (ratio >= 4.5) {
                        this.contrastStatus = 'Bom (AA)';
                        this.contrastClass = 'text-blue-600';
                    } else if (ratio >= 3) {
                        this.contrastStatus = 'Adequado (AA Large)';
                        this.contrastClass = 'text-yellow-600';
                    } else {
                        this.contrastStatus = 'Inadequado';
                        this.contrastClass = 'text-red-600';
                    }
                },

                applyColorsToContent() {
                    // Simular a aplica√ß√£o de cores como no sistema real
                    const contentArea = document.querySelector('.hospital-content');
                    if (contentArea) {
                        contentArea.style.backgroundColor = this.backgroundColor;
                        contentArea.style.color = this.textColor;

                        // Aplicar especificamente aos H1-H6
                        const headings = contentArea.querySelectorAll('h1, h2, h3, h4, h5, h6');
                        headings.forEach(heading => {
                            heading.style.color = this.textColor;
                            heading.style.setProperty('color', this.textColor, 'important');
                        });

                        // Aplicar aos breadcrumbs
                        const breadcrumbs = contentArea.querySelectorAll('.breadcrumb, .breadcrumbs, .page-breadcrumb');
                        breadcrumbs.forEach(breadcrumb => {
                            breadcrumb.style.color = this.textColor;
                            const links = breadcrumb.querySelectorAll('a, span, li');
                            links.forEach(link => {
                                link.style.color = this.textColor;
                                link.style.setProperty('color', this.textColor, 'important');
                            });
                        });

                        // Aplicar aos headers espec√≠ficos
                        const headers = contentArea.querySelectorAll('.page-header, .content-header, .header-title');
                        headers.forEach(header => {
                            header.style.color = this.textColor;
                            const children = header.querySelectorAll('*');
                            children.forEach(child => {
                                child.style.color = this.textColor;
                                child.style.setProperty('color', this.textColor, 'important');
                            });
                        });
                    }
                }
            }
        }
    </script>
</body>
</html>
